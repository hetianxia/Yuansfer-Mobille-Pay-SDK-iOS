//
//  SVIndefiniteAnimatedView.m
//  SVProgressHUD, https://github.com/SVProgressHUD/SVProgressHUD
//
//  Copyright (c) 2014-2018 Guillaume Campagna. All rights reserved.
//

#import "YSIndefiniteAnimatedView.h"
#import "YSProgressHUD.h"

static NSString * const kAngleMask_1 = @"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";
static NSString * const kAngleMask_2 = @"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";
static NSString * const kAngleMask_3 = @"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";

@interface YSIndefiniteAnimatedView ()

@property (nonatomic, strong) CAShapeLayer *indefiniteAnimatedLayer;

@end

@implementation YSIndefiniteAnimatedView

- (void)willMoveToSuperview:(UIView*)newSuperview {
    if (newSuperview) {
        [self layoutAnimatedLayer];
    } else {
        [_indefiniteAnimatedLayer removeFromSuperlayer];
        _indefiniteAnimatedLayer = nil;
    }
}

- (void)layoutAnimatedLayer {
    CALayer *layer = self.indefiniteAnimatedLayer;
    [self.layer addSublayer:layer];
    
    CGFloat widthDiff = CGRectGetWidth(self.bounds) - CGRectGetWidth(layer.bounds);
    CGFloat heightDiff = CGRectGetHeight(self.bounds) - CGRectGetHeight(layer.bounds);
    layer.position = CGPointMake(CGRectGetWidth(self.bounds) - CGRectGetWidth(layer.bounds) / 2 - widthDiff / 2, CGRectGetHeight(self.bounds) - CGRectGetHeight(layer.bounds) / 2 - heightDiff / 2);
}

- (CAShapeLayer*)indefiniteAnimatedLayer {
    if(!_indefiniteAnimatedLayer) {
        CGPoint arcCenter = CGPointMake(self.radius+self.strokeThickness/2+5, self.radius+self.strokeThickness/2+5);
        UIBezierPath* smoothedPath = [UIBezierPath bezierPathWithArcCenter:arcCenter radius:self.radius startAngle:(CGFloat) (M_PI*3/2) endAngle:(CGFloat) (M_PI/2+M_PI*5) clockwise:YES];
        
        _indefiniteAnimatedLayer = [CAShapeLayer layer];
        _indefiniteAnimatedLayer.contentsScale = [[UIScreen mainScreen] scale];
        _indefiniteAnimatedLayer.frame = CGRectMake(0.0f, 0.0f, arcCenter.x*2, arcCenter.y*2);
        _indefiniteAnimatedLayer.fillColor = [UIColor clearColor].CGColor;
        _indefiniteAnimatedLayer.strokeColor = self.strokeColor.CGColor;
        _indefiniteAnimatedLayer.lineWidth = self.strokeThickness;
        _indefiniteAnimatedLayer.lineCap = kCALineCapRound;
        _indefiniteAnimatedLayer.lineJoin = kCALineJoinBevel;
        _indefiniteAnimatedLayer.path = smoothedPath.CGPath;
        
        CALayer *maskLayer = [CALayer layer];
        
        NSString *imageString = kAngleMask_1;
        if ([[NSString stringWithFormat:@"%.f", UIScreen.mainScreen.scale] isEqualToString:@"2"]) {
            imageString = kAngleMask_2;
        } else if ([[NSString stringWithFormat:@"%.f", UIScreen.mainScreen.scale] isEqualToString:@"3"]) {
            imageString = kAngleMask_3;
        }
        NSData *imageData = [[NSData alloc] initWithBase64EncodedString:imageString options:kNilOptions];
        
        maskLayer.contents = (__bridge id)[[[UIImage alloc] initWithData:imageData] CGImage];
        maskLayer.frame = _indefiniteAnimatedLayer.bounds;
        _indefiniteAnimatedLayer.mask = maskLayer;
        
        NSTimeInterval animationDuration = 1;
        CAMediaTimingFunction *linearCurve = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
        
        CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
        animation.fromValue = (id) 0;
        animation.toValue = @(M_PI*2);
        animation.duration = animationDuration;
        animation.timingFunction = linearCurve;
        animation.removedOnCompletion = NO;
        animation.repeatCount = INFINITY;
        animation.fillMode = kCAFillModeForwards;
        animation.autoreverses = NO;
        [_indefiniteAnimatedLayer.mask addAnimation:animation forKey:@"rotate"];
        
        CAAnimationGroup *animationGroup = [CAAnimationGroup animation];
        animationGroup.duration = animationDuration;
        animationGroup.repeatCount = INFINITY;
        animationGroup.removedOnCompletion = NO;
        animationGroup.timingFunction = linearCurve;
        
        CABasicAnimation *strokeStartAnimation = [CABasicAnimation animationWithKeyPath:@"strokeStart"];
        strokeStartAnimation.fromValue = @0.015;
        strokeStartAnimation.toValue = @0.515;
        
        CABasicAnimation *strokeEndAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
        strokeEndAnimation.fromValue = @0.485;
        strokeEndAnimation.toValue = @0.985;
        
        animationGroup.animations = @[strokeStartAnimation, strokeEndAnimation];
        [_indefiniteAnimatedLayer addAnimation:animationGroup forKey:@"progress"];
        
    }
    return _indefiniteAnimatedLayer;
}

- (void)setFrame:(CGRect)frame {
    if(!CGRectEqualToRect(frame, super.frame)) {
        [super setFrame:frame];
        
        if(self.superview) {
            [self layoutAnimatedLayer];
        }
    }
    
}

- (void)setRadius:(CGFloat)radius {
    if(radius != _radius) {
        _radius = radius;
        
        [_indefiniteAnimatedLayer removeFromSuperlayer];
        _indefiniteAnimatedLayer = nil;
        
        if(self.superview) {
            [self layoutAnimatedLayer];
        }
    }
}

- (void)setStrokeColor:(UIColor*)strokeColor {
    _strokeColor = strokeColor;
    _indefiniteAnimatedLayer.strokeColor = strokeColor.CGColor;
}

- (void)setStrokeThickness:(CGFloat)strokeThickness {
    _strokeThickness = strokeThickness;
    _indefiniteAnimatedLayer.lineWidth = _strokeThickness;
}

- (CGSize)sizeThatFits:(CGSize)size {
    return CGSizeMake((self.radius+self.strokeThickness/2+5)*2, (self.radius+self.strokeThickness/2+5)*2);
}

@end
